var jQuery,document;(function($){$(document).on("widget-added",function(event,widget){var widget_id=$("#"+widget[0].id),select_obj_name=widget_id.find(".GeoMashup-search > p.object-name select"),select_tax=widget_id.find(".GeoMashup-search > .taxonomy_section select");if(select_tax.length){var fieldset_tems=widget_id.find(".GeoMashup-search > .taxonomy_section > fieldset"),termlist=fieldset_tems.find("fieldset"),hidden_input=fieldset_tems.find("input.hide-if-js"),checkbox_array=[];var reset_terms=function(){termlist.hide();checkbox_array=[];hidden_input.val("");fieldset_tems.find("input:checkbox").each(function(){$(this).prop("checked",false)})};var obj_name_action=function(select,action){if(action=="change"){reset_terms();if(select.val()=="post"){select_tax.val("category").change()}else{select_tax.val("select").change()}}if(select.val()=="user"||select.val()=="comment"){widget_id.find("span.taxonomy_section").hide();reset_terms();select_tax.val("select").change()}else{fieldset_tems.find("fieldset."+select_tax.find("option:selected").val()).show();widget_id.find("span.taxonomy_section").show()}};obj_name_action(select_obj_name,"add");termlist.hide();if(hidden_input.val().length!==0||select_tax.val()!=="select"){checkbox_array=hidden_input.val().split(",");fieldset_tems.find("fieldset."+select_tax.find("option:selected").val()).show()}else{checkbox_array=[];fieldset_tems.find("fieldset."+select_tax.find("option:first-child").val()).show()}select_obj_name.change(function(){obj_name_action($(this),"change")});select_tax.change(function(){reset_terms();fieldset_tems.find("fieldset."+$(this).val()).show()});fieldset_tems.find("input:checkbox").change(function(){var input=$(this);if(input.is(":checked")){checkbox_array.push(input.val())}else{checkbox_array.splice($.inArray(input.val(),checkbox_array),1)}hidden_input.val(checkbox_array.join(","))})}})})(jQuery);
